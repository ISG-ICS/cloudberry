{
  "dataset": "dataset.name",
  "lookup": [
    {
      "sourceKey": [
        "keyName"
      ],
      "dataset": "name",
      "lookupKey": [
        "keyName"
      ],
      "select": [
        "outputKeyName"
      ],
      "as": [
        "asName"
      ]
    }
  ],
  "filter": [
    {
      "field": "fieldP",
      "apply": "func|null",
      "relation": "==|<|>|<=|>=|isTrue(default)|in|contains|inRange",
      "values": [
        "x"
      ]
    }
  ],
  "group": {
    "by": [
      {
        "field": "fieldA",
        "apply": "function",
        "groups": 1000,
        "as": "outputString"
      },
      {
        "comment": "vision: `function` may not be required since the middleware should be able to auto scale to an acceptable phase",
        "time": "x {year|month|day|hour|minute}",
        "geo": {
          "choropleth": "{country|state|county|city|neighborhood}}",
          "cell": [
            1,
            2,
            3,
            4
          ]
        },
        "quantitative": {
          "scale": 10
        }
      }
    ],
    "summarize": [
      {
        "field": "fieldB|*",
        "apply": {
          "name": "topK",
          "args": {
            "k": 10
          }
        },
        "as": "outputFieldName"
      }
    ]
  },
  "order": {
    "on": [
      "fields"
    ],
    "limit": 100,
    "offset": 0,
    "select": [
      "fieldNames"
    ]
  }
}
