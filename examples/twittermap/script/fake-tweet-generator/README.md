# Fake Tweet Generator
### by Joseph Zheng

## Description
This generator can be used to generate fake usernames and tweets. The tweets are generated by models learned from real tweets using the python `textgenrnn` library.

## Prerequisites
Prerequisite libraries: `textgenrnn`, which can be installed using `pip install textgenrnn`
If any of the other imported libraries is missing, install it using `pip install <library>`

## Pipeline
The following describes the full pipeline of creating fake tweets:

0. IMPORTANT: create a subdirectory called `weights` in the same directory as the scripts for the pipeline to work.

1. Run `create_ds_tweet_coord.sql` to create the `ds_tweet_coord` dataset which contains all the tweets with coordinates from the `ds_tweet` dataset.

2. Run `name_generator.py` to get distinct user ids from the AsterixDB database and pair them with fake names and fake screen names. Then the script inserts these `{'id': <id>, 'name': <name>, 'screen_name': <screen_name>}` records into the `fname` dataset. It takes one argument: `-s` -- the url of the AsterixDB server. An example is `python3 name_generator.py -s http://localhost`. Please use `python3 name_generator.py --help` for a detailed description of the script and its arguments.

3. Run `tweet_trainer.py` to train models using the python textgenrnn library. It trains models for specified keywords when keywords are supplied and a general model when no keyword is supplied. It takes four arguments: `-s` -- the url of the AsterixDB server, `-w` -- the keywords to be trained, `-k` -- the training sample size, and `-e` -- the training epoch. There can be multiple `-w` flags, each followed by exactly one keyword. An example is `python3 tweet_trainer.py -s http://localhost -w food -w world -w water -w happy -w dollar -k 2000 -e 5`. Please use `python3 tweet_trainer.py --help` for a detailed description of the script and its arguments.

4. Run `keyword_text_generator.py` to generate texts for specified keywords using their trained models and write them into a json file, which will be used in `text_generator.py`. It takes three arguments: `-s` -- the url of the AsterixDB server, `-w` -- the keywords to generate tweets, and `-o` -- the filename to store the keyword json (e.g. `local_keyword.json`). There can be multiple `-w` flags, each followed by exactly one keyword. An example is `python3 keyword_text_generator.py -s http://localhost -w food -w world -w water -w happy -w dollar -o local_keyword.json`. Please use `python3 keyword_text_generator.py --help` for a detailed description of the script and its arguments.

5. Run `text_generator.py` to get tweet ids from the AsterixDB database, pair them with fake texts and write them into a json file, which will be used in `text_inserter.py`. For ids associated with specified keywords, the script pairs them with texts generated for those keywords in `keyword_text_generator.py`, which are stored in the json file. For other ids, `text_generator.py` generates random texts using the trained general model and pair each id with a fake text. It takes four arguments: `-s` -- the url of the AsterixDB server, `-w` -- the keywords to generate tweets, `-i` -- the filename storing the keyword json (which should be the output file of `keyword_text_generator.py`, e.g. `local_keyword.json`), and `-o` -- the filename to store the complete text json (e.g. `local_text.json`). There can be multiple `-w` flags, each followed by exactly one keyword. An example is `python3 text_generator.py -s http://localhost -w food -w world -w water -w happy -w dollar -i local_keyword.json -o local_text.json`. Please use `python3 text_generator.py --help` for a detailed description of the script and its arguments.

6. Run `text_inserter.py` to read the fake texts from a json file (which should be the output file of `text_generator.py`, e.g. local_text.json). Then the script inserts these `{'id': <id>, 'text': <text>}` records into the `ftext` dataset. It takes two arguments: `-s` -- the url of the AsterixDB server, and `-i` -- the filename storing the complete text json (e.g. `local_text.json`). An example is `python3 text_inserter.py -s http://localhost -i local_text.json`. Please use `python3 text_inserter.py --help` for a detailed description of the script and its arguments.

7. Run `replace_tweets.sql` to merge the `fname` dataset, the `ftext` dataset and the `ds_tweet_coord` dataset into the `ds_tweet_coord_replaced` dataset. The final dataset should be identical to the `ds_tweet_coord` dataset except that it uses fake names, screen names and texts for the tweets.

## Appendix
Relevant files:
1. asterixdb_connector.py (python connector to AsterixDB)
2. pynamesgenerator.py (generates fake names and screen names)
3. name_generator.py
4. tweet_trainer.py
5. keyword_text_generator.py
6. text_generator.py
7. text_inserter.py
8. create_ds_tweet_coord.sql
9. replace_tweets.sql
